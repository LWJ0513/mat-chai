<!-- Signup Container -->
<div class="signup-container">
  <!-- Header -->
  <div class="signup-header">
    <h2>Create Account</h2>
    <p>Join us to find your perfect match</p>
  </div>
  <!-- Signup Form -->
  <form [formGroup]="signupForm" (ngSubmit)="onSubmit()" class="signup-form">
    <!-- Name Row -->
    <div class="name-row">
      <div class="form-group">
        <label for="firstName">First Name</label>
        <input id="firstName" formControlName="firstName" type="text" placeholder="Enter your first name" required>
      </div>
      <div class="form-group">
        <label for="lastName">Last Name</label>
        <input id="lastName" formControlName="lastName" type="text" placeholder="Enter your last name" required>
      </div>
    </div>


    <!-- Username -->
    <div class="form-group">
      <label for="userName">Username</label>
      <input id="userName" formControlName="userName" type="text" placeholder="Choose a unique username" required>
    </div>
    <!-- Email -->
    <div class="form-group">
      <label for="email">Email Address</label>
      <input id="email" formControlName="email" type="email" placeholder="Enter your email address" required>
    </div>

    <!-- Date of Birth -->
    <div class="form-group">
      <label for="dateOfBirth">Date of Birth</label>
      <input id="dateOfBirth" formControlName="dateOfBirth" type="date" required>
      @if (signupForm.get('dateOfBirth')?.value) {
        <div class="age-display">
          <span class="age-label">Age: </span>
          <span class="age-value">{{ calculateAge(signupForm.get('dateOfBirth')?.value) }} years old</span>
        </div>
      }
    </div>
    <!-- Password -->
    <div class="form-group">
      <label for="password">Password</label>
      <input id="password" formControlName="password" type="password" placeholder="Create a strong password"
        (input)="onPasswordInput()" required>
      <!-- Password Strength Indicator -->
      @if (signupForm.get('password')?.value) {
      <div class="password-strength">
        <span class="strength-label">Strength:</span>
        <span class="strength-value" [ngClass]="{
                                      'weak': passwordStrength === 'Weak',
                                      'medium': passwordStrength === 'Medium', 
                                      'strong': passwordStrength === 'Strong'
                                    }">
          {{ passwordStrength }}
        </span>
      </div>
      }
    </div>

    <!-- Confirm Password -->
    <div class="form-group">
      <label for="confirmPassword">Confirm Password</label>
      <input id="confirmPassword" formControlName="confirmPassword" type="password" placeholder="Confirm your password"
        required>
    </div>
    <!-- Validation Messages -->
    @if (hasValidationErrors()) {
    <div class="validation-messages">
      @if (passwordContainsPersonalInfo()) {
      <div class="validation-error">
        <span class="error-icon">⚠️</span>
        <span>Password should not contain your personal information</span>
      </div>
      }
      @if (passwordsMismatch()) {
      <div class="validation-error">
        <span class="error-icon">⚠️</span>
        <span>Passwords do not match</span>
      </div>
      }
    </div>
    }

    <!-- Submit Button -->
    <button type="submit" class="submit-button" [disabled]="!isPasswordValid() || isLoading"
      [class.disabled]="!isPasswordValid() || isLoading">
      @if (isLoading) {
      <span>Creating Account...</span>
      } @else {
      <span>Create Account</span>
      }
    </button>
  </form>

  <!-- Login Link -->
  <div class="login-link">
    <p>
      Already have an account?
      <a routerLink="/login">Sign in</a>
      </p>
      </div>
</div>
